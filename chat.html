<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="lokcss.css">
    <link rel="stylesheet" href="mainchatlok.css">
    
</head>

<body>
  <div class="header">
    <div class="nav-logo-container">
        <div>
                <div class="nav-logo">
                    <div id="mySidenav" class="sidenav">
                <span href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times; </span>
                <span id="home" onclick="home()">Home</span>
                <span id="chat" onclick="chat()" class="active">Chat</span>
                <span id="video" onclick="video()">Video</span>
                <span id="test" onclick="test()">Test</span>
                <span id="news" onclick="news()">News</span>
                <span id="cheat" onclick="panel()">Profile</span>
                <span id="about" onclick="about()">About</span>
                <span id="logout" onclick="logout()">Log Out</span>

            </div>
            </div>
        </div>
    </div>
    <div class="nav-logo-open-container">
        <div id="nav-open-id-container">
            <span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776; <a href="#default" class="logo">Legion Of Knowlegde</a></span>
        </div>
    </div>
</div>
<script src="script.js"></script>


  
    <div class="message-container">
      <div id="scroller">
        <div id="anchor">
        <div id="chat-container">
            <ul id="messages">
                <li></li>
            </ul>
        </div>
</div>
</div>
            <div id="message-box-container">
                <input type="text" id="messageInput">
<button id="sendButton"> Send</button>
<ul id="messages">
  
</ul>
            </div>
        
    </div>


    </body>

    <script src="https://www.gstatic.com/firebasejs/7.14.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.5/firebase-database.js"></script>
    <script type="module">

  
      var lll = localStorage.getItem("textvalue");
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyBmuATPx4LbQAPWyIdbRcqpkgn8nsUB8hw",
      authDomain: "lok-db.firebaseapp.com",
      databaseURL: "https://lok-db-default-rtdb.firebaseio.com",
      projectId: "lok-db",
      storageBucket: " ",
      messagingSenderId: "803437560630",
      appId: "1:803437560630:web:6ceeee89f0052d41dea997",
      measurementId: "G-GLVY4H3X97"
    };
    
    firebase.initializeApp(firebaseConfig);
    
    
    
    
    // code starts from here
 
    document.getElementById("sendButton").addEventListener("click", function() {
      var message = document.getElementById("messageInput").value;
      firebase.database().ref("messages").push().set({
        username: lll,
        message: message
      });
      document.getElementById("messageInput").value = "";
    });
    

    // receive message

var messagesRef = firebase.database().ref("messages");
var messagesContainer = document.getElementById("messages");
var inputContainer = document.getElementById("input");

window.addEventListener("resize", function() {
  if (window.innerHeight < inputContainer.offsetTop + inputContainer.offsetHeight) {
    inputContainer.style.position = "absolute";
    inputContainer.style.bottom = "0";
  } else {
    inputContainer.style.position = "fixed";
    inputContainer.style.bottom = "";
  }
});

messagesRef.on("child_added", function(snapshot) {
  var message = snapshot.val();
  
  if (message.username && message.message) {
    var node = document.createElement("LI");
    var textnode = document.createTextNode(message.username + ": " + message.message);
    node.appendChild(textnode);
    messagesContainer.appendChild(node);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
  }
});

// // rel-time mesage
// firebase.database().ref("messages").on("child_added", function(snapshot) {
//   var message = snapshot.val().message;
//   console.log("Received message: " + lll + ":" + message);
// });



    </script>

  
  
</html>